{"version":3,"sources":["timeline.js"],"names":["c","document","getElementById","ctx","getContext","cw","width","ch","height","points","tick","opt","count","range","x","y","duration","min","max","thickness","strokeColor","level","curved","rand","Math","floor","random","ease","t","b","d","holdAnimation","step","$","window","posPoints","blokedPoints","filter","point","blocking","direction","counters","left","right","i","centerPoint","$el","$counter","find","css","bottom","background","data","countTo","transform","lineJoin","lineWidth","strokeStyle","length","round","Point","config","anchorX","anchorY","setTarget","initialX","initialY","targetX","targetY","dx","dy","dist","sqrt","abs","beginPath","arc","PI","fillStyle","fill","updatePoints","number","needUpdate","update","renderPoints","render","renderShape","color","pointCount","moveTo","quadraticCurveTo","lineTo","closePath","stroke","clear","clearRect","loop","requestAnimationFrame","spacing","j","push","resizeTimeout","on","clearTimeout","setTimeout"],"mappings":"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","file":"timeline.js","sourcesContent":["let c = document.getElementById('timeline'),\r\n    ctx = c.getContext('2d'),\r\n    cw = c.width = 1903,\r\n    ch = c.height = 250,\r\n    points = [],\r\n    tick = 0,\r\n    opt = {\r\n      count: 23,\r\n      range: {\r\n        x: 10,\r\n        y: 70\r\n      },\r\n      duration: {\r\n        min: 130,\r\n        max: 150\r\n      },\r\n      thickness: 3,\r\n      strokeColor: 'rgba(69, 35, 97, 1)',\r\n      level: .35,\r\n      curved: true\r\n    },\r\n    rand = function(min, max){\r\n        return Math.floor( (Math.random() * (max - min + 1) ) + min);\r\n    },\r\n    ease = function (t, b, c, d) {\r\n\t    if ((t/=d/2) < 1) return c/2*t*t + b;\r\n\t    return -c/2 * ((--t)*(t-2) - 1) + b;\r\n    },\r\n    holdAnimation = false,\r\n    step = 3;\r\n\r\n    if ($(window).width() < 1280 && $(window).width() > 1099){\r\n\t\t\topt.count = 20;\r\n\t\t\tstep = 2;\r\n\t\t}else if ($(window).width() < 1100){\r\n\t\t\topt.count = 19;\r\n\t\t\tstep = 2;\r\n\t\t}\r\n\r\nconst posPoints = (points) =>{\r\n\tlet blokedPoints = points[0].filter(point => point.blocking);\r\n\r\n\t// console.log(blokedPoints);\r\n\tlet direction = \"center\",\r\n\t\t\tcounters = {\r\n\t\t\t\tleft: step,\r\n\t\t\t\tright: step,\r\n\t\t\t}\r\n\r\n\tfor (let i = 0; i < count; i++){\r\n\t\tlet point = {};\r\n\r\n\t\tswitch (direction){\r\n\t\t\tcase \"right\":\r\n\t\t\t\tpoint = points[0][centerPoint + counters.right];\r\n\t\t\t\tcounters.right += step;\r\n\t\t\t\tdirection = \"left\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"left\":\r\n\t\t\t\tpoint = point = points[0][centerPoint - counters.left];\r\n\t\t\t\tcounters.left += step;\r\n\t\t\t\tdirection = \"right\";\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tpoint = point = points[0][centerPoint];\r\n\t\t\t\tdirection = \"right\";\r\n\t\t}\r\n\r\n\t\tlet $el = $(\".timeline__el:eq(\"+i+\")\"),\r\n\t\t\t\t$counter = $el.find(\".counter\");\r\n\r\n\t\t$el.css({\r\n\t\t\tbottom: point.y+\"px\",\r\n\t\t\tleft: point.x+\"px\",\r\n\t\t});\r\n\r\n\t\t$counter.css({\r\n\t\t\tbackground: \"linear-gradient(to right, \"+$counter.data(\"color1\")+\", \"+$counter.data(\"color2\")+\")\"\r\n\t\t}).countTo()\r\n\t}\r\n}\r\n\r\nctx.transform(1, 0, 0, -1, 0, c.height);\r\n\r\nctx.lineJoin = 'round';\r\nctx.lineWidth = opt.thickness;\r\nctx.strokeStyle = opt.strokeColor;\r\n\r\nlet count = $(\".timeline__el\").length,\r\n\t\tcenterPoint = Math.round(opt.count / 2);\r\n\r\nclass Point{\r\n\tconstructor(config){\r\n\t\tthis.anchorX = config.x;\r\n\t\tthis.anchorY = config.y;\r\n\t\tthis.x = config.x;\r\n\t\tthis.y = config.y;\r\n\t\tthis.setTarget();  \r\n\t}\r\n\tsetTarget(){\r\n\t\tthis.initialX = this.x;\r\n\t\tthis.initialY = this.y;\r\n\t\tthis.targetX = this.anchorX + rand(0, opt.range.x * 2) - opt.range.x;\r\n\t\tthis.targetY = this.anchorY + rand(0, opt.range.y * 2) - opt.range.y;\r\n\t\tthis.tick = 0;\r\n\t\tthis.duration = rand(opt.duration.min, opt.duration.max);\r\n\t}\r\n\tupdate(){\r\n\t\tvar dx = this.targetX - this.x;\r\n\t\tvar dy = this.targetY - this.y;\r\n\t\tvar dist = Math.sqrt(dx * dx + dy * dy);\r\n\r\n\t\tif(Math.abs(dist) <= 0){\r\n\t\t\tthis.setTarget();\r\n\t\t} else {       \r\n\t\t\tvar t = this.tick;\r\n\t\t\tvar b = this.initialY;\r\n\t\t\tvar c = this.targetY - this.initialY;\r\n\t\t\tvar d = this.duration;\r\n\t\t\tthis.y = ease(t, b, c, d);\r\n\r\n\t\t\tb = this.initialX;\r\n\t\t\tc = this.targetX - this.initialX;\r\n\t\t\td = this.duration;\r\n\t\t\tthis.x = ease(t, b, c, d);\r\n\r\n\t\t\tthis.tick++;\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(this.x, this.y, 3, 0, Math.PI * 2, false);\r\n\t\tctx.fillStyle = '#fff';\r\n\t\tctx.fill();\r\n\t}\r\n}\r\n\r\nlet updatePoints = (number = 0, needUpdate = false) =>{\r\n  let i = points[number].length;\r\n  while(i--){\r\n  \tif (points[number][i].blocking && !needUpdate)\r\n  \t\tcontinue\r\n    points[number][i].update();\r\n  }\r\n},\r\nrenderPoints = (number = 0) =>{\r\n  let i = points[number].length;\r\n  while(i--){\r\n    points[number][i].render();\r\n  }\r\n};\r\n\r\nlet renderShape = (color = \"rgba(69, 35, 97, 1)\", number = 0) =>{\r\n\tctx.strokeStyle = color;\r\n  ctx.beginPath();\r\n  var pointCount = points[number].length;\r\n  ctx.moveTo(points[number][0].x, points[number][0].y);\r\n\r\n  var i;\r\n  for (i = 0; i < pointCount - 1; i++) {\r\n    var c = (points[number][i].x + points[number][i + 1].x) / 2;\r\n    var d = (points[number][i].y + points[number][i + 1].y) / 2;\r\n    ctx.quadraticCurveTo(points[number][i].x, points[number][i].y, c, d);\r\n  }\r\n  ctx.lineTo(-opt.range.x - opt.thickness, ch + opt.thickness);\r\n  ctx.lineTo(cw + opt.range.x + opt.thickness, ch + opt.thickness);\r\n  ctx.closePath();\r\n  ctx.stroke();\r\n};\r\n\r\nvar clear = function(){\r\n  ctx.clearRect(0, 0, cw, ch);\r\n};\r\n\r\nvar loop = function(){\r\n\tif (!holdAnimation)\r\n  \ttick = window.requestAnimationFrame(loop, c);\r\n  clear();\r\n  updatePoints();\r\n  renderShape();\r\n  // renderPoints();\r\n\r\n\tupdatePoints(1);\r\n\trenderShape(\"rgba(69, 35, 97, .4)\", 1);\r\n\r\n\tupdatePoints(2);\r\n\trenderShape(\"rgba(69, 35, 97, .4)\", 2);\r\n};\r\n\r\nvar spacing = (cw + (opt.range.x * 2)) / (opt.count-1);\r\n\r\n\r\nfor (var j = 0; j < 3; j++){\r\n\tpoints[j] = [];\r\n\tvar i = opt.count + 2;\r\n\twhile(i--){\r\n\t  points[j].push(new Point({\r\n\t    x: (spacing * (i - 1)) - opt.range.x,\r\n\t    y: ch - (ch * opt.level + rand(0, opt.range.y)),\r\n\t    blocking: false,\r\n\t  }));\r\n\t}\r\n}\r\n\r\nfor (let i = 0; i < count; i++){\r\n\tfor (let j = 0; j < 3; j++){\r\n\t\tpoints[j][centerPoint + i * step].blocking = true;\r\n\t\tpoints[j][centerPoint - i * step].blocking = true;\r\n\t}\r\n}\r\n\r\nposPoints(points);\r\n\r\nloop();\r\n\r\n\r\nlet resizeTimeout;\r\n// const prevComparison = performance.now();\r\n$(window).on(\"resize1\", () => {\r\n\t// const now = performance.now();\r\n\r\n\tclearTimeout(resizeTimeout);\r\n\tholdAnimation = true;\r\n\r\n\tresizeTimeout = setTimeout(() => {\r\n\t\tclear();\r\n\t\ttick = 0;\r\n\r\n\t\tlet step = 3;\r\n\t\topt.count = 23;\r\n\r\n\t\t// if ($(window).width() > 1601){\r\n\t\t// \topt.count = 23;\r\n\t\t// \tstep = 3;\r\n\t\t// }else if ($(window).width() < 1601 && $(window).width() > 1500){\r\n\t\t// \topt.count = 20;\r\n\t\t// \tstep = 3;\r\n\t\t// }else if ($(window).width() < 1500 && $(window).width() >= 1600){\r\n\t\t// \topt.count = 18;\r\n\t\t// \tstep = 3;\r\n\t\t// }\r\n\r\n\t\tctx.transform(1, 0, 0, -1, 0, c.height);\r\n\r\n\t\t// if (now - prevComparison >= 100){\r\n\t\t\t// cw = c.width = $(\"#page-wr\").width(),\r\n\t\t\tpoints = [];\r\n\t\t\tvar spacing = (cw + (opt.range.x * 2)) / (opt.count-1);\r\n\r\n\t\t\tfor (var j = 0; j < 3; j++){\r\n\t\t\t\tpoints[j] = [];\r\n\t\t\t\tvar i = opt.count + 2;\r\n\t\t\t\twhile(i--){\r\n\t\t\t\t  points[j].push(new Point({\r\n\t\t\t\t    x: (spacing * (i - 1)) - opt.range.x,\r\n\t\t\t\t    y: ch - (ch * opt.level + rand(0, opt.range.y)),\r\n\t\t\t\t    blocking: false,\r\n\t\t\t\t  }));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < count; i++){\r\n\t\t\t\tfor (let j = 0; j < 3; j++){\r\n\t\t\t\t\tpoints[j][centerPoint + i * step].blocking = true;\r\n\t\t\t\t\t// points[j][centerPoint + i * 3].y += 20;\r\n\t\t\t\t\tpoints[j][centerPoint - i * step].blocking = true;\r\n\t\t\t\t\t// points[j][centerPoint - i * 3].y += 20;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// updatePoints(i, true);\r\n\t\t\t}\r\n\r\n\t\t\tposPoints(points)\r\n\t\t// }\r\n\r\n\t\tholdAnimation = false;\r\n\r\n\t\tloop();\r\n\r\n\t}, 150);\r\n});"]}